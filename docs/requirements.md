# "水杯不装水"一人公司数字化聚合终端 需求文档 (V2.0)

## 1. 品牌愿景与设计哲学

### 1.1 品牌主旨
**自由、松弛、赚钱；创造由自己定义的生活。**

本站作为"水杯不装水"的个人品牌旗舰店，聚合品牌哲学、付费计划及深度知识库。

### 1.2 设计风格
乔布斯极简主义。强调几何感与阴影，消除视觉噪音。黑、白、灰为底色，橙色作为动作指引色。

### 1.3 标准色盘

| 类型 | 颜色 | 色值 | 用途 |
|------|------|------|------|
| 主色 | 纯黑 | #1A1A1A | 主要文字、标题 |
| 主色 | 纯白 | #FFFFFF | 背景、卡片 |
| 辅助色 | 优雅深灰 | #86868B | 次要文字、描述 |
| 点睛色 | 品牌橙 | #FF4500 | 引导、激活态、涟漪动效、行动按钮 |

---

## 2. 站点结构与路由 (Site Map & Routing)

| 路径 | 页面名称 | 访问权限 | 当前状态 | 交互逻辑 |
|------|----------|----------|----------|----------|
| `/` | 主页 (Home) | 公开 | 待建（占位） | 品牌叙事 + 模块入口 |
| `/ripple` | 涟漪计划 (Ripple) | 鉴权 | 待建（占位） | 付费会员控制台，展示权益预告 |
| `/giants` | 巨人的肩膀 (Giants) | 鉴权 | 已完成 | 核心知识库，嵌入 Notion 内容 |
| `/auth` | 网关 (Gate) | 公开 | 后台逻辑 | 统一的登录/支付验证入口 |

> **注**：`/giants` 对应原 `/post/[id]` 路由下的知识库内容，现有实现保持不变，路由别名待后续统一。

---

## 3. 视觉规范 (Visual Identity System)

- **背景**：纯白（`#FFFFFF`）或极浅灰（`#F5F5F7`）
- **文字**：深灰（`#1D1D1F`）用于标题，中灰（`#86868B`）用于辅助文字
- **高亮**：橙色（`#FF4500`）用于涟漪动态效果和行动按钮
- **排版**：非衬线字体（Inter 或 SF Pro），行间距 1.6x 以上，营造呼吸感

---

## 4. 全局信息架构 (Information Architecture)

### 4.1 动态配置中心
全站基于 **动态配置中心 (site.ts)** 驱动，确保"一次修改，全站同步"。

**配置文件位置**：`src/config/site.ts`

### 4.2 四大核心模块（知识库支柱）

| 模块 | 定位 | Notion ID |
|------|------|-----------|
| 方向与判断 | 定位、路径与思维基调 | 31088738e1468058840ef56709b6d272 |
| 内容与创造 | 知识输入与个人品牌输出 | 31088738e14680dd87f7c8ba398ff685 |
| 系统与执行 | 工作流、工具链与效率体系 | 待更新 |
| 商业与转化 | 商业模式、变现路径与闭环 | 待更新 |

---

## 5. 页面详细定义

### 5.1 主页 `/`（待建）

#### 视觉重心
- 极简欢迎语与品牌 Slogan
- 纯粹、光影感、几何感与大面积留白

#### 核心交互：问题导航卡片阵列

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│              "水杯不装水" 个人品牌旗舰店                  │
│                                                         │
│         自由、松弛、赚钱，创造由自己定义的人生             │
│                                                         │
├─────────────┬─────────────┬─────────────┬─────────────┤
│  方向与判断  │  内容与创造  │  系统与执行  │  商业与转化  │
│             │             │             │             │
│  当你需要    │  当你在创作  │  当你想把事  │  当你开始面  │
│  确认方向    │  上卡住     │  情做下去   │  对外界反馈  │
│             │             │             │             │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

#### 主页功能要点
- 展示四大模块入口，通过几何感色块或光影图片引导
- 作为全站逻辑的起点，链接与配置文件同步
- 卡片悬停效果：边框变橙、微阴影
- 包含品牌叙事文案区域

### 5.2 涟漪计划 `/ripple`（待建）

付费会员控制台。

**未订阅状态（锁定态）：**
- 页面内容区域显示模糊背景（backdrop-filter: blur）
- 中央显示橙色锁定图标 + 解锁引导文案
- 引导按钮跳转至 `/auth` 完成支付

**已订阅状态（解锁态）：**
- 展示会员权益详情
- 展示付费内容预告与更新动态

### 5.3 巨人的肩膀 `/giants`（已完成）

核心知识库，内容来自 Notion。

**未订阅状态（锁定态）：**
- 知识库内容区域显示模糊背景
- 橙色锁定图标居中显示
- 引导至 `/auth` 解锁

**已订阅状态（解锁态）：**
- 完整展示 Notion 知识库内容
- 四大模块导航正常可用

#### 导航即标题 (Nav-as-Title)

| 元素 | 规格 |
|------|------|
| 传统 H1 标题 | 取消，由导航替代 |
| 导航布局 | 四大模块并置显示 |
| 当前模块 | 文字加粗变黑 (#000000) |
| 非当前模块 | 深灰色 (#86868B) |
| 动态指示器 | 激活项下方显示"双向退晕"橙色渐变细线 |

```
方向与判断    内容与创造    系统与执行    商业与转化
    ━━━
 (橙色渐变下划线)
```

#### 内容呈现 (Gallery Grid) — 三明治布局

```
┌─────────────────────────────────────┐
│ 1. 卡片标题                          │  ← 清晰、直接
│    (16px, 纯黑, order: 1)            │
├─────────────────────────────────────┤
│                                     │
│ 2. 物理占位大图                       │  ← 光影感核心
│    (16:9 比例锁定, order: 2)          │
│                                     │
├─────────────────────────────────────┤
│ 3. 详细介绍文本                       │  ← 深度背景
│    (12px, 深灰 #86868B, order: 3)     │
└─────────────────────────────────────┘
```

### 5.4 网关 `/auth`（后台逻辑）

统一的登录/支付验证入口。

- 简洁的单页表单，符合极简设计风格
- 支持登录验证与支付完成后的跳转回调
- 验证成功后设置 `isSubscribed` 状态，解锁对应页面

---

## 6. 鉴权与付费墙（产品层面）

### 6.1 状态变量
全局预留 `isSubscribed` 布尔变量，控制 `/ripple` 和 `/giants` 的内容可见性。

### 6.2 锁定态视觉规范

| 元素 | 规格 |
|------|------|
| 内容遮罩 | backdrop-filter: blur(12px)，内容不可读但可感知 |
| 锁定图标 | 橙色（#FF4500）锁形图标，居中显示 |
| 引导文案 | 简短说明权益，橙色按钮引导至 `/auth` |
| 导航栏 | 正常显示，不受锁定影响 |

---

## 7. 用户体验与交互细节 (UX/Interaction)

### 7.1 内容打开方式：Center Peek（居中弹出）
- 知识库卡片点击后，以居中 Modal 弹出内容，不产生全页面跳转的顿挫感
- Modal 背景半透明遮罩，支持点击遮罩或 ESC 关闭

### 7.2 加载仪式感

#### 客户端挂载保护 (Hydration Guard)
```tsx
const [isMounted, setIsMounted] = useState(false);
useEffect(() => { setIsMounted(true); }, []);
if (!isMounted) return <骨架屏占位 />;
```

#### 渐显动画
- 时长：0.4s
- 曲线：cubic-bezier(0.23, 1, 0.32, 1)
- 效果：opacity 0 → 1 + translateY 10px → 0

### 7.3 响应式模数

| 断点 | 列数 | 间距 |
|------|------|------|
| > 1200px | 3列 | 24px |
| 768px - 1200px | 2列 | 20px |
| < 768px | 1列 | 16px |

- 最大宽度：1024px，居中方式：margin: 0 auto

---

## 8. 技术实现

### 8.1 文件结构

```
d:\vibe-coding\
├── app/
│   ├── page.tsx                  # 主页 /
│   ├── globals.css               # 全局样式
│   ├── layout.tsx                # 全局布局（含顶部导航）
│   └── post/[id]/page.tsx        # 知识库详情页路由
├── components/
│   ├── NotionPageClient.tsx      # 知识库渲染核心组件
│   └── NotionModal.tsx           # Center Peek Modal
├── src/config/
│   └── site.ts                   # 导航配置中枢
├── lib/
│   └── notion.ts                 # Notion API 封装
└── docs/
    └── requirements.md           # 需求文档
```

### 8.2 全局布局
导航栏固定在顶部，包含 Logo 和 3 个核心入口（主页、涟漪计划、巨人的肩膀）。

### 8.3 关键 CSS 实现

#### 三明治结构
```css
.notion-collection-card-body {
  display: contents !important;
}
.notion-collection-card-property:has(.notion-page-title) {
  order: 1 !important;
  padding: 16px 16px 8px 16px !important;
}
.notion-collection-card-cover {
  order: 2 !important;
  aspect-ratio: 16 / 9 !important;
}
.notion-collection-card-property:not(:has(.notion-page-title)) {
  order: 3 !important;
  padding: 8px 16px 16px 16px !important;
}
```

#### 导航动态指示器
```css
.nav-underline {
  position: absolute;
  bottom: -12px;
  height: 1px;
  background: linear-gradient(90deg, transparent, #FF4500 50%, transparent);
}
```

### 8.4 扩展性预留 (Future Proofing)

| 功能 | 状态 | 说明 |
|------|------|------|
| 搜索框 UI | 预留 | `/giants` 页面预留搜索框位置，底层逻辑暂空 |
| Webhook 接口 | 预留 | 未来用于同步 Bilibili 或 YouTube 内容 |
| 自动化流 | 预留 | 内容平台内容自动同步至知识库 |

---

## 9. 已解决的问题

| 问题 | 原因 | 解决方案 |
|------|------|----------|
| 首屏 Hydration Mismatch | react-notion-x 与自定义 CSS 冲突 | isMounted 保护 + 骨架屏 + 渐显动画 |
| 卡片文字消失 | display: contents 导致布局失效 | display: block !important + visibility: visible |
| 导航堆叠 | 首屏 flex 容器未正确计算 | width: 100% + justify-content: space-between |
| 图片高度塌陷 | 图片未加载时无占位空间 | aspect-ratio: 16/9 !important |
| 构建缓存损坏 | .next 缓存与新代码不兼容 | rm -rf .next && npm run dev |

---

## 10. 待办事项

| 优先级 | 任务 | 状态 |
|--------|------|------|
| 高 | 更新"系统与执行"的真实 Notion ID | 待处理 |
| 高 | 更新"商业与转化"的真实 Notion ID | 待处理 |
| 高 | 建设主页 `/` 品牌叙事页面 | 待建 |
| 高 | 建设涟漪计划 `/ripple` 占位页 | 待建 |
| 高 | 建设鉴权网关 `/auth` | 待建 |
| 中 | 实现 `isSubscribed` 状态与付费墙遮罩 | 待建 |
| 中 | 全局导航栏（含 Logo + 3 入口） | 待建 |
| 中 | `/giants` 搜索框 UI 预留 | 待建 |
| 低 | 优化移动端触摸交互 | 待评估 |
| 低 | Webhook 接口预留 | 待评估 |

---

*文档版本：V2.0*
*文档更新时间：2026-02-28*
*负责人：水杯不装水*
